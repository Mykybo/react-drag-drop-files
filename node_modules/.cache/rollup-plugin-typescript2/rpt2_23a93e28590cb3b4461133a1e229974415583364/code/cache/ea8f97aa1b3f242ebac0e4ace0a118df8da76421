{"code":"import { __assign } from \"tslib\";\r\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { Description, DescriptionWrapper, HoverMsg, UploaderWrapper } from './style';\r\nimport { acceptedExt, checkType, getFileSizeMB } from './utils';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport DrawTypes from './DrawTypes';\r\nimport ImageAdd from './ImageAdd';\r\nimport useDragging from './useDragging';\r\n/**\r\n *\r\n * Draw a description on the frame\r\n * @param currFile - The uploaded file\r\n * @param uploaded - boolean to check if the file uploaded or not yet\r\n * @param typeError - boolean to check if the file has type errors\r\n * @param disabled - boolean to check if input is disabled\r\n * @param label - string to add custom label\r\n * @returns JSX Element\r\n *\r\n * @internal\r\n *\r\n */\r\nvar drawDescription = function (currFile, uploaded, typeError, disabled, label) {\r\n    return typeError ? (_jsx(\"span\", { children: \"File type/size error, Hovered on types!\" }, void 0)) : (_jsx(Description, { children: disabled ? (_jsx(\"span\", { children: \"Upload disabled\" }, void 0)) : !currFile && !uploaded ? (_jsx(_Fragment, { children: label ? (_jsxs(_Fragment, { children: [_jsx(\"span\", { children: label.split(' ')[0] }, void 0), ' ', label.substr(label.indexOf(' ') + 1)] }, void 0)) : (_jsxs(_Fragment, { children: [_jsx(\"span\", { children: \"Upload\" }, void 0), \" or drop a file right here\"] }, void 0)) }, void 0)) : (_jsxs(_Fragment, { children: [_jsx(\"span\", { children: \"Uploaded Successfully!\" }, void 0), \" Upload another?\"] }, void 0)) }, void 0));\r\n};\r\n/**\r\n * File uploading main function\r\n * @param props - {name,\r\n    hoverTitle,\r\n    types,\r\n    handleChange,\r\n    classes,\r\n    children,\r\n    maxSize,\r\n    minSize,\r\n    fileOrFiles,\r\n    onSizeError,\r\n    onTypeError,\r\n    onSelect,\r\n    onDrop,\r\n    onTypeError,\r\n    disabled,\r\n    label,\r\n    multiple,\r\n    onDraggingStateChange\r\n  }\r\n * @returns JSX Element\r\n */\r\nvar FileUploader = function (props) {\r\n    var name = props.name, hoverTitle = props.hoverTitle, types = props.types, handleChange = props.handleChange, classes = props.classes, children = props.children, maxSize = props.maxSize, minSize = props.minSize, fileOrFiles = props.fileOrFiles, onSizeError = props.onSizeError, onTypeError = props.onTypeError, onSelect = props.onSelect, onDrop = props.onDrop, disabled = props.disabled, label = props.label, multiple = props.multiple, onDraggingStateChange = props.onDraggingStateChange, dropMessageStyle = props.dropMessageStyle;\r\n    var labelRef = useRef(null);\r\n    var inputRef = useRef(null);\r\n    var _a = useState(false), uploaded = _a[0], setUploaded = _a[1];\r\n    var _b = useState(null), currFiles = _b[0], setFile = _b[1];\r\n    var _c = useState(false), error = _c[0], setError = _c[1];\r\n    var validateFile = function (file) {\r\n        if (types && !checkType(file, types)) {\r\n            // types included and type not in them\r\n            setError(true);\r\n            if (onTypeError)\r\n                onTypeError('File type is not supported');\r\n            return false;\r\n        }\r\n        if (maxSize && getFileSizeMB(file.size) > maxSize) {\r\n            setError(true);\r\n            if (onSizeError)\r\n                onSizeError('File size is too big');\r\n            return false;\r\n        }\r\n        if (minSize && getFileSizeMB(file.size) < minSize) {\r\n            setError(true);\r\n            if (onSizeError)\r\n                onSizeError('File size is too small');\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    var handleChanges = function (files) {\r\n        var checkError = false;\r\n        if (files) {\r\n            if (files instanceof File) {\r\n                checkError = !validateFile(files);\r\n            }\r\n            else {\r\n                for (var i = 0; i < files.length; i++) {\r\n                    var file = files[i];\r\n                    checkError = !validateFile(file) || checkError;\r\n                }\r\n            }\r\n            if (checkError)\r\n                return false;\r\n            if (handleChange)\r\n                handleChange(files);\r\n            setFile(files);\r\n            setUploaded(true);\r\n            setError(false);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    var blockEvent = function (ev) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n    };\r\n    var handleClick = function (ev) {\r\n        ev.stopPropagation();\r\n        // eslint-disable-next-line no-param-reassign\r\n        if (inputRef && inputRef.current) {\r\n            inputRef.current.click();\r\n        }\r\n    };\r\n    var handleInputChange = function (ev) {\r\n        var allFiles = ev.target.files;\r\n        var files = multiple ? allFiles : allFiles[0];\r\n        var success = handleChanges(files);\r\n        if (onSelect && success)\r\n            onSelect(files);\r\n    };\r\n    var dragging = useDragging({\r\n        labelRef: labelRef,\r\n        inputRef: inputRef,\r\n        multiple: multiple,\r\n        handleChanges: handleChanges,\r\n        onDrop: onDrop\r\n    });\r\n    useEffect(function () {\r\n        onDraggingStateChange === null || onDraggingStateChange === void 0 ? void 0 : onDraggingStateChange(dragging);\r\n    }, [dragging]);\r\n    useEffect(function () {\r\n        if (fileOrFiles) {\r\n            setUploaded(true);\r\n            setFile(fileOrFiles);\r\n        }\r\n        else {\r\n            if (inputRef.current)\r\n                inputRef.current.value = '';\r\n            setUploaded(false);\r\n            setFile(null);\r\n        }\r\n    }, [fileOrFiles]);\r\n    return (_jsxs(UploaderWrapper, __assign({ overRide: children, className: \"\".concat(classes || '', \" \").concat(disabled ? 'is-disabled' : ''), ref: labelRef, htmlFor: name, onClick: blockEvent }, { children: [_jsx(\"input\", { onClick: handleClick, onChange: handleInputChange, accept: acceptedExt(types), ref: inputRef, type: \"file\", name: name, disabled: disabled, multiple: multiple }, void 0), dragging && (_jsx(HoverMsg, __assign({ style: dropMessageStyle }, { children: _jsx(\"span\", { children: hoverTitle || 'Drop Here' }, void 0) }), void 0)), !children && (_jsxs(_Fragment, { children: [_jsx(ImageAdd, {}, void 0), _jsxs(DescriptionWrapper, __assign({ error: error }, { children: [drawDescription(currFiles, uploaded, error, disabled, label), _jsx(DrawTypes, { types: types, minSize: minSize, maxSize: maxSize }, void 0)] }), void 0)] }, void 0)), children] }), void 0));\r\n};\r\nexport default FileUploader;\r\n//# sourceMappingURL=FileUploader.js.map","references":["/home/mykybo/repository/react-drag-drop-files/src/style.ts","/home/mykybo/repository/react-drag-drop-files/src/utils.ts","/home/mykybo/repository/react-drag-drop-files/node_modules/@types/react/index.d.ts","/home/mykybo/repository/react-drag-drop-files/src/DrawTypes.tsx","/home/mykybo/repository/react-drag-drop-files/src/ImageAdd.tsx","/home/mykybo/repository/react-drag-drop-files/src/useDragging.tsx"],"map":"{\"version\":3,\"file\":\"FileUploader.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/FileUploader.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/mykybo/repository/react-drag-drop-files/node_modules/.cache/rollup-plugin-typescript2/placeholder/src/FileUploader.d.ts","writeByteOrderMark":false,"text":"import React from 'react';\r\ndeclare type Props = {\r\n    name?: string;\r\n    hoverTitle?: string;\r\n    types?: Array<string>;\r\n    classes?: string;\r\n    children?: JSX.Element;\r\n    maxSize?: number;\r\n    minSize?: number;\r\n    fileOrFiles?: Array<File> | File | null;\r\n    disabled?: boolean | false;\r\n    label?: string | undefined;\r\n    multiple?: boolean | false;\r\n    onSizeError?: (arg0: string) => void;\r\n    onTypeError?: (arg0: string) => void;\r\n    onDrop?: (arg0: File | Array<File>) => void;\r\n    onSelect?: (arg0: File | Array<File>) => void;\r\n    handleChange?: (arg0: File | Array<File> | File) => void;\r\n    onDraggingStateChange?: (dragging: boolean) => void;\r\n    dropMessageStyle?: React.CSSProperties | undefined;\r\n};\r\n/**\r\n * File uploading main function\r\n * @param props - {name,\r\n    hoverTitle,\r\n    types,\r\n    handleChange,\r\n    classes,\r\n    children,\r\n    maxSize,\r\n    minSize,\r\n    fileOrFiles,\r\n    onSizeError,\r\n    onTypeError,\r\n    onSelect,\r\n    onDrop,\r\n    onTypeError,\r\n    disabled,\r\n    label,\r\n    multiple,\r\n    onDraggingStateChange\r\n  }\r\n * @returns JSX Element\r\n */\r\ndeclare const FileUploader: React.FC<Props>;\r\nexport default FileUploader;\r\n"}}
